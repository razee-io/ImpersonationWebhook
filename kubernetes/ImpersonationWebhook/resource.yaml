apiVersion: v1
kind: List
metadata:
  name: impersonation-webhook-list
  # annotations:
  #   razee.io/git-repo: "{{{GIT_REMOTE}}}"
  #   razee.io/commit-sha: "{{{TRAVIS_COMMIT}}}"
  #   version: "{{{TRAVIS_COMMIT}}}"
type: array
items:
  - apiVersion: v1
    kind: Secret
    metadata:
      name: impersonation-webhook-cert
    type: kubernetes.io/tls
    data:
      ca.crt: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZhRENDQTFDZ0F3SUJBZ0lVRHhDeUx2KzJOc3VYRWFYZVVkQWF5WGhva2dnd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0xERXFNQ2dHQTFVRUF3d2hhVzF3WlhKemIyNWhkR2x2YmkxM1pXSm9iMjlyTG1SbFptRjFiSFF1YzNaagpNQjRYRFRJeU1EVXlNekU0TURreU1Wb1hEVE15TURVeU1ERTRNRGt5TVZvd0xERXFNQ2dHQTFVRUF3d2hhVzF3ClpYSnpiMjVoZEdsdmJpMTNaV0pvYjI5ckxtUmxabUYxYkhRdWMzWmpNSUlDSWpBTkJna3Foa2lHOXcwQkFRRUYKQUFPQ0FnOEFNSUlDQ2dLQ0FnRUF6MG9Na1ZNV0FLQ2Q2RXhJMXJmbldTTm9XWGo2T3ZjQ3ZQdHZwZ0t6a3ZPWgowbDVwbThEZlJPNWRxOElTYW5vNVU5WkxvYzlsdnVBdkFBd2Vjc2RWckRkT3RZc0VadUliRGhubklzVEUwcXJOCkJKdFdOSWFUdGhnWTVDM2MraW4vQkdzSjhQL1VNZkFkdjQ3dFlEZ3J3MC9QZmdZYnRlUWRXbDdzclM3SW9ndjMKMTA5SjJXY1lHTjhCZC80bER5a1c5cGFpS1M4a0ViTmYwMG1zYWdLMHhkV0dHQTRiYm92Q2VQc3pxeTdvRWZJMQo1Z0s5clF4VnRoSW9JT3p3WGw1UXJVcm1GaUljUjZLTnZNSVR6V1BhOVM5RnVWMVI5OE9DK0xWQ1h2LzRjbFhTCmttYUd0c2hzdUxFbmFQVVIxQlpETTRpUmtDOWU5ZHc5eE1BeUhFSlJSTWI3TVc1MVhNTVNuU29QODJMTlR2a3EKWU1LQmQraWNBdW1HaXhjdFB0bVZmZmFsSmNvWUtBQ2Y3bVdTYm5mbktMTlZ4dG9DMndtYngvaHhqU1JBdzhDeApXendkUk0ySm9ZdURQb0NNSUNQSjdSeEovZWJvQWU1dlFEVzl2cXZYVUNVQUNWV2U2d04wSVRjNUp3NkpFMkN6CmlDOEd1bDZTMEtHdEdMaHhJbVRHbExrOEpUaUlLM0NIbk8yQ0s0TG96SjVaazREUWJJVlZDOW90NGg1TzVoVHcKVndJaTRxQlpCWkNXM0d1bHVSOFJreE1RYVBmQVhsYUQ5VDVEOUgvdjdxYnZ5UmJJRmRDdFZ0ZGFwd1VKRTZCRQpRLzVWYUJNMEUyVU1uVkVsT2lpaWFQZFFUakNuSGp0bjNEOUpHZElja2ljcHQ2YVFjOTlGakxBYlAzVWpraThDCkF3RUFBYU9CZ1RCL01CMEdBMVVkRGdRV0JCVFBLRWVJcXIrVnp6cEhEVGJSWHZubGpoUGVMVEFmQmdOVkhTTUUKR0RBV2dCVFBLRWVJcXIrVnp6cEhEVGJSWHZubGpoUGVMVEFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQ3dHQTFVZApFUVFsTUNPQ0lXbHRjR1Z5YzI5dVlYUnBiMjR0ZDJWaWFHOXZheTVrWldaaGRXeDBMbk4yWXpBTkJna3Foa2lHCjl3MEJBUXNGQUFPQ0FnRUFmV2lHbXVNYkFydDBRcWt1bG9QaEx3bHBzakZIV0V0anlTRUxjeGIxekFiQ0wrWCsKOXlHT2ErazRJUW10akhQeE9vUWorVk00RUJQaWxRTi9wZzMvQUNvS1Q2RFcxMTVyMElSUDJrM3hWdHRpWE5QWApkQ1BuVHFVdXlqdmtFeTZ4Y1MxZ1BaSGZvMUhtVGQ4eU81YXk3bk5CWWdsdzJ5UkdJQVZSSXA4cjBmK3VXQkpmCktkOUtodHJ3dWNrSzNtQ0Q5a3JqeU91YTlxMVJtVVEvdk4wWlZEMk0xUHRBeDJPSmd6emIrNWxPQ2FMYWlZUVYKaEVSSUZjV1dOcXdpVjZMVTZUOVFhNUo1ZkJCbldDZ2Z3cGFFWnk3WmZTUFpBRHJBQzZzU2dXOTdDZ25ObDVOQgpIelJzNk5TekZxZ245b2RvNzNVdGpLK2xSaDI0MTFuTkxOSkp2OEI1Rmk3VUZ5OGZnWm4xN0ZzaTNNNGdrM2tYCkNMcHZFQzJRdFpESENvUTB2SjRqNklFVWYwMmxGREpFYU9kdHVUM1BjWDRoR2d3ZDIyQ2ZjRW9EM0VaQ0E1UEwKVS9iV3I2UC9Ic1FhZEozM09yMjBHMlNNNTZUNUgwTG5GeTZSb2dSbGJGa0VUNGZOQ3Bld3pMVnlQcjNJQ2lHVwpTbzVyb0JDZkJycmFyMXo4aVBydVFRV1FSd00wMExBVnBPTktuM0dSaXcxOVN6N0ozcFB3dXBKdkNzQjBkNE5YCmNHRUNUYVFpQmh6TENqOTBXV3czWnBCSS9SdGYwRFJjcFFlOGx2ZlZ2MDhDK0M4VUZqM0RyU0pqdXhkdW5vR3YKdjUxWXl4dzh2T0RENWJvY2l2SHZCNHFiTnFvUno4dVR5RmFWOHEyZmVFemJIOFhwVlJLUDRhc20zSjQ9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0="
      tls.crt: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZhRENDQTFDZ0F3SUJBZ0lVRHhDeUx2KzJOc3VYRWFYZVVkQWF5WGhva2dnd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0xERXFNQ2dHQTFVRUF3d2hhVzF3WlhKemIyNWhkR2x2YmkxM1pXSm9iMjlyTG1SbFptRjFiSFF1YzNaagpNQjRYRFRJeU1EVXlNekU0TURreU1Wb1hEVE15TURVeU1ERTRNRGt5TVZvd0xERXFNQ2dHQTFVRUF3d2hhVzF3ClpYSnpiMjVoZEdsdmJpMTNaV0pvYjI5ckxtUmxabUYxYkhRdWMzWmpNSUlDSWpBTkJna3Foa2lHOXcwQkFRRUYKQUFPQ0FnOEFNSUlDQ2dLQ0FnRUF6MG9Na1ZNV0FLQ2Q2RXhJMXJmbldTTm9XWGo2T3ZjQ3ZQdHZwZ0t6a3ZPWgowbDVwbThEZlJPNWRxOElTYW5vNVU5WkxvYzlsdnVBdkFBd2Vjc2RWckRkT3RZc0VadUliRGhubklzVEUwcXJOCkJKdFdOSWFUdGhnWTVDM2MraW4vQkdzSjhQL1VNZkFkdjQ3dFlEZ3J3MC9QZmdZYnRlUWRXbDdzclM3SW9ndjMKMTA5SjJXY1lHTjhCZC80bER5a1c5cGFpS1M4a0ViTmYwMG1zYWdLMHhkV0dHQTRiYm92Q2VQc3pxeTdvRWZJMQo1Z0s5clF4VnRoSW9JT3p3WGw1UXJVcm1GaUljUjZLTnZNSVR6V1BhOVM5RnVWMVI5OE9DK0xWQ1h2LzRjbFhTCmttYUd0c2hzdUxFbmFQVVIxQlpETTRpUmtDOWU5ZHc5eE1BeUhFSlJSTWI3TVc1MVhNTVNuU29QODJMTlR2a3EKWU1LQmQraWNBdW1HaXhjdFB0bVZmZmFsSmNvWUtBQ2Y3bVdTYm5mbktMTlZ4dG9DMndtYngvaHhqU1JBdzhDeApXendkUk0ySm9ZdURQb0NNSUNQSjdSeEovZWJvQWU1dlFEVzl2cXZYVUNVQUNWV2U2d04wSVRjNUp3NkpFMkN6CmlDOEd1bDZTMEtHdEdMaHhJbVRHbExrOEpUaUlLM0NIbk8yQ0s0TG96SjVaazREUWJJVlZDOW90NGg1TzVoVHcKVndJaTRxQlpCWkNXM0d1bHVSOFJreE1RYVBmQVhsYUQ5VDVEOUgvdjdxYnZ5UmJJRmRDdFZ0ZGFwd1VKRTZCRQpRLzVWYUJNMEUyVU1uVkVsT2lpaWFQZFFUakNuSGp0bjNEOUpHZElja2ljcHQ2YVFjOTlGakxBYlAzVWpraThDCkF3RUFBYU9CZ1RCL01CMEdBMVVkRGdRV0JCVFBLRWVJcXIrVnp6cEhEVGJSWHZubGpoUGVMVEFmQmdOVkhTTUUKR0RBV2dCVFBLRWVJcXIrVnp6cEhEVGJSWHZubGpoUGVMVEFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQ3dHQTFVZApFUVFsTUNPQ0lXbHRjR1Z5YzI5dVlYUnBiMjR0ZDJWaWFHOXZheTVrWldaaGRXeDBMbk4yWXpBTkJna3Foa2lHCjl3MEJBUXNGQUFPQ0FnRUFmV2lHbXVNYkFydDBRcWt1bG9QaEx3bHBzakZIV0V0anlTRUxjeGIxekFiQ0wrWCsKOXlHT2ErazRJUW10akhQeE9vUWorVk00RUJQaWxRTi9wZzMvQUNvS1Q2RFcxMTVyMElSUDJrM3hWdHRpWE5QWApkQ1BuVHFVdXlqdmtFeTZ4Y1MxZ1BaSGZvMUhtVGQ4eU81YXk3bk5CWWdsdzJ5UkdJQVZSSXA4cjBmK3VXQkpmCktkOUtodHJ3dWNrSzNtQ0Q5a3JqeU91YTlxMVJtVVEvdk4wWlZEMk0xUHRBeDJPSmd6emIrNWxPQ2FMYWlZUVYKaEVSSUZjV1dOcXdpVjZMVTZUOVFhNUo1ZkJCbldDZ2Z3cGFFWnk3WmZTUFpBRHJBQzZzU2dXOTdDZ25ObDVOQgpIelJzNk5TekZxZ245b2RvNzNVdGpLK2xSaDI0MTFuTkxOSkp2OEI1Rmk3VUZ5OGZnWm4xN0ZzaTNNNGdrM2tYCkNMcHZFQzJRdFpESENvUTB2SjRqNklFVWYwMmxGREpFYU9kdHVUM1BjWDRoR2d3ZDIyQ2ZjRW9EM0VaQ0E1UEwKVS9iV3I2UC9Ic1FhZEozM09yMjBHMlNNNTZUNUgwTG5GeTZSb2dSbGJGa0VUNGZOQ3Bld3pMVnlQcjNJQ2lHVwpTbzVyb0JDZkJycmFyMXo4aVBydVFRV1FSd00wMExBVnBPTktuM0dSaXcxOVN6N0ozcFB3dXBKdkNzQjBkNE5YCmNHRUNUYVFpQmh6TENqOTBXV3czWnBCSS9SdGYwRFJjcFFlOGx2ZlZ2MDhDK0M4VUZqM0RyU0pqdXhkdW5vR3YKdjUxWXl4dzh2T0RENWJvY2l2SHZCNHFiTnFvUno4dVR5RmFWOHEyZmVFemJIOFhwVlJLUDRhc20zSjQ9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0="
      tls.key: "LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUpSQUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQ1M0d2dna3FBZ0VBQW9JQ0FRRFBTZ3lSVXhZQW9KM28KVEVqV3QrZFpJMmhaZVBvNjl3SzgrMittQXJPUzg1blNYbW1id045RTdsMnJ3aEpxZWpsVDFrdWh6MlcrNEM4QQpEQjV5eDFXc04wNjFpd1JtNGhzT0dlY2l4TVRTcXMwRW0xWTBocE8yR0Jqa0xkejZLZjhFYXdudy85UXg4QjIvCmp1MWdPQ3ZEVDg5K0JodTE1QjFhWHV5dExzaWlDL2ZYVDBuWlp4Z1kzd0YzL2lVUEtSYjJscUlwTHlRUnMxL1QKU2F4cUFyVEYxWVlZRGh0dWk4SjQrek9yTHVnUjhqWG1BcjJ0REZXMkVpZ2c3UEJlWGxDdFN1WVdJaHhIb28yOAp3aFBOWTlyMUwwVzVYVkgzdzRMNHRVSmUvL2h5VmRLU1pvYTJ5R3k0c1NkbzlSSFVGa016aUpHUUwxNzEzRDNFCndESWNRbEZFeHZzeGJuVmN3eEtkS2cvellzMU8rU3Bnd29GMzZKd0M2WWFMRnkwKzJaVjk5cVVseWhnb0FKL3UKWlpKdWQrY29zMVhHMmdMYkNadkgrSEdOSkVERHdMRmJQQjFFelltaGk0TStnSXdnSThudEhFbjk1dWdCN205QQpOYjIrcTlkUUpRQUpWWjdyQTNRaE56a25Eb2tUWUxPSUx3YTZYcExRb2EwWXVIRWlaTWFVdVR3bE9JZ3JjSWVjCjdZSXJndWpNbmxtVGdOQnNoVlVMMmkzaUhrN21GUEJYQWlMaW9Ga0ZrSmJjYTZXNUh4R1RFeEJvOThCZVZvUDEKUGtQMGYrL3VwdS9KRnNnVjBLMVcxMXFuQlFrVG9FUkQvbFZvRXpRVFpReWRVU1U2S0tKbzkxQk9NS2NlTzJmYwpQMGtaMGh5U0p5bTNwcEJ6MzBXTXNCcy9kU09TTHdJREFRQUJBb0lDQVFER0dkWjQ3QmFTOHV6MkhERmdRdER0CjkxQzZjVXR6SHEyWFBoUXRhMWVDa1J2b1dDSkZuOFhBY3ExQ2dHNXBJL1cxa1k4bVRMYkgvQ2Z1dTZZOXV4SzkKU3Y0RnNaMjdWVXJWNXh0bHR2Y0MvZ2lBNXBNMEQ0a0s5V3lVWk9CU2srQUxzT0FIV2ZiSTR0a0xRT1RLbCtQNgovRU1vQlY1bUxtTi9Ba2plR1YvVXZldFY4WWg2SkhSN0VHU3U4RXNxZWZKZ0p3VkNwcktwMStzMFdheFVnOUdQClg4aVBKS3hDc1g1aGNIQ29vR05aQTBsUFVEOUZLZ3lmdkNwdGpRTUtyTWdkVlA4ZkYrbys2N0xaT2dFQ3dQTjQKYm4wTDhZdHNaWVM5ZXp5NjNaWHFidXFXenpUZmFodTlSbENMbGVvNzdpcTdEVUZQc25YbU1WMDJzeGN3dXBBKwptUGU3ZmhTeGcvODB5RDhBVWRRNld1QzF5VmRWblFhNW9lTXJIS1IvVHlsMW1xd094eGgwSTZhNFhJK256VXRpCk9pd0pLS2duVmFkczJMaHowU2JJNDJoeUU5YVZYR2pQalNVZFRoOW54WWxLOWJsN0hoYlJYa3RncnlqTHdkeHUKNm9icnRuVTRQak5zcWtnRExNMGdzQ2lPbU1hSkJ4Q2s5c25JTUlCMmhrSHNHQ3RLVC9yMHN0bWViVElTMVpLQgppd0FKNEdGRG9UaXdSelF6VjU3MERvbksyWklpS1l1YS83U2JGSDRjQ0VHWlYzMG9CSnhScFB6L3V6Q0VZeS9qCjA1clo2L0tFcytUWmNQK3hwUnlaNzZlbnRENDlMMU95eTVJUzhJVG1pcEFwQzlpbnd1NUo3YnFkYndSUGJlQkYKRzBHaTdTQWxMbk9pdk9yYVBCTWJnUUtDQVFFQStJb1h5dXVZanJIbFMwaitDTWVuaVlQbi9RbHRJQW9oNkpDTgphVjlqY0o3Y04rekFVeksySnZvUHJYOS9MZ3dEOGl5cS9LaC9jekl0dmcxQXBuSVMyNmw2SnhzYSt2Vjh2ODlpCms3SWhQM29lZkg5U0FDZ3R2dUNNWjRGRUt2Q3VraUdUK2ZSa2ZoRTFjb2xhclpVOTEyT3REcXI2eE9IWStzWUoKUDVha1JXQkZTL0psWW55Y2ppelgyMXZLQ0FrQ0hoVVpua3NWVkFtNll3ZWpPOElYZ0NoRWtVNXFpdUdqcjlFegoxZXYvbktDV01mamRpcmZVajlpc253bEdtcGJwWDQ1clg3RzdCNUEvWlFJZFgzcUtMZjE0V2dWQ0lZNlk4d0VMCiswaTYycTlqTGwwL1dwdW9pVmdteDdNWVdZK2hxcFZwUCtyNXRnTFFVQkUrRlRtemR3S0NBUUVBMVlMMzNxZzEKOWgyM0JiVEdoZnZMYUp1RDBMSklnRkgxUGV5LzJKTnd5K2hCNjVPU1NDUFNNbnF3NVBnenJLakJwMjhCYkx1QgpvQml4N3ltZVRERkZIQ2ZlZXpqK25YTk1QUzU0Vi95WmlhSWJ1M2d6aWMrZjZYYldHSytJdjloNEpmMkhsUVFvCm1JQVRvei9RbkNMbDdmeWthbWFJSHJ5R3ZxNEpwSEJCL3BuTkxiRHY0K05SdndPT2QvQ081bmJ0MjluSzBDR1gKcWlvZloxN0ZqbWdCY0ROQTVHWjh2cWpuRkhpQ3BreUtiZ09pMG1xUnVzWVJnUWFnRHVVai9VUVFpN0dlaitWVwpGVng1R0RDekZ0Mmp1QXl4TENjalRpWHBPNFFpZ2hJbyswSk5ncE1LQThRTzM2aG1aUGtmWWFtYXE1S2xZcHlqCm1MSUJabjJaZnBpVkNRS0NBUUVBaTNUSTF1YU5Lbnd0UWFvS1NKam1xK1drdFRtbHpwV0E0MExBNWtCTXhyT00KczZDWFpkZU5sNTgyVHM2OGFQVDYvZGNNZGtxQmdQekY1OTc5eUtjM1o2UFgwN3VFenc0UjJucWVRR3R4OW5FcQpUQWNRMXQrMGsyYmh3VzRwOXNJbjRmMFBUL0JPdHVJbkVFWjc1K3hXejlXeEZBcmlQTGpSREIwMHNVWndsRERwCmtTeklzSk5sTU8xK2pTb2EyWmxjWTg3SkdpWGRLTk53andLSkdBM1hLK1RzWEhBWW5pYnZ0c1ozQkhDd2M0MHoKMllSZm91ZDFVT1Z1THFxQXdGc3ZSWnZmS2NuTFBQbzJhQkhnczJOSngzWnpJbWZTN0l0YnpQWm9aNjR1a21oWgpDWG52QTROVjlRTE9kNzFKUzIrcGNkTDJSSlF2VzI2R3ZuWitWR0NWRHdLQ0FRRUF2NHdHcWJlSTZhc1E1a3FmCkM5YXdUc0d1Q1EzWTQxNGp3UkZqcjMzZTVPQVNPN0VodkJ4KzJCQ2dJRnJYcVIrZzFJQk82K2h3UzF1OFRnNnQKV0RlZmc3bjA2K0ZlODR4YnFrdkZaVkpWd0ZjeHdBYi9YYlJxQno0NHB0N2J0UmtUK1NreGVLdkphNzhEWHlMQwpHVUZwdkE4NnhjWUVlbWF5RCtEOC80eENlSklzczhBWUJ2K0o5KzdONHFacTNURjNCUlNuMGY5QkhFVTc5VFhkCjBIdFlSdnVFVFNQdzUrK0ptQ0RoUFNaUHpwRHVndzFlZmd4eDZhb3k4QW44TnB2WXFDcUtVUmZ6R2FqamJxTksKRjhweHRZMlZhVUlYZDJXbGoySmt2d0poeDhCYzN6Ymc5aTN2RmhIekFzVkl0UW8rbTR3dFdZR2pkenJDN05yagpXT0swV1FLQ0FRQjVHVDBXNjhNZ1ZWcHh4eDk1RmZlUE85bi9iRk8yVzRSSFVjdXpTa2VxNnBjZTE3M1VwZzdpClNVMVhTa25YRUtodnNNcXhUTTBZSDArNlcveURMZXpnMkxMNjFKUFNqTTZHWkFlS3pTVnVqMkZTd0tZNzVUQXYKQXNFcHNRZUZwbDNxTWJZckZtcnZPUDJsSVJVSlQ5NTZUS0gwTmFmMmoyeWhKQWFzSlg5RFhmTzFPTWg1aHh4RwpoUWdjclJwU1Irei95NTIrQjdkM2Q4Y2xLcklpY2RkTExDV25FNm42NkF1dTlWNkVaU3Y2S043RmhWckpiOWtUCkZlbVFDVHl3MUpIZGJmRnRTWC82TUF6NTl4ZUlZZy9IUmVJNC9ZWmV2b1ZEN2Fsd0dyRXQ0bm55R0VIYUNUUlIKWnlMWE5RS3lBOEdmWDNtUGVucURHcHZxOFJONlB3RloKLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLQ=="
  - apiVersion: apps/v1
    kind: Deployment
    metadata:
      name: impersonation-webhook
    spec:
      replicas: 1
      selector:
        matchLabels:
          app: impersonation-webhook
      strategy:
        type: RollingUpdate
      template:
        metadata:
          labels:
            app: impersonation-webhook
          name: impersonation-webhook
        spec:
          serviceAccountName: razeedeploy-sa
          # securityContext:
          #   runAsUser: {{{NODE_USER_ID}}}
          #   runAsGroup: {{{NODE_GROUP_ID}}}
          #   fsGroup: {{{NODE_GROUP_ID}}}
          containers:
          # - image: "quay.io/razee/impersonation-webhook:{{{TRAVIS_TAG}}}"
          - image: "impersonation-webhook:latest"
            resources:
              limits:
                memory: 200Mi
                cpu: 100m
              requests:
                memory: 75Mi
                cpu: 40m
            env:
              - name: USER_AGENT_NAME
                value: razee-io/impersonation-webhook
              - name: USER_AGENT_VERSION
                # value: "{{{TRAVIS_TAG}}}"
                value: "1.0.0"
              - name: TLS_CA
                valueFrom:
                  secretKeyRef:
                    name: impersonation-webhook-cert
                    key: ca.crt
              - name: TLS_CERT
                valueFrom:
                  secretKeyRef:
                    name: impersonation-webhook-cert
                    key: tls.crt
              - name: TLS_KEY
                valueFrom:
                  secretKeyRef:
                    name: impersonation-webhook-cert
                    key: tls.key
            name: impersonation-webhook
            imagePullPolicy: Never
            ports:
            - containerPort: 8443
  - apiVersion: v1
    kind: Service
    metadata:
      name: impersonation-webhook
    spec:
      ports:
      - port: 443
        protocol: TCP
        targetPort: 8443
      selector:
        app: impersonation-webhook
  - apiVersion: admissionregistration.k8s.io/v1
    kind: MutatingWebhookConfiguration
    metadata:
      name: impersonation-webhook
    webhooks:
    - name: impersonation-webhook.default.svc
      rules:
      - apiGroups:   ["deploy.razee.io"]
        apiVersions: ["v1alpha2"]
        operations:  ["CREATE", "UPDATE"]
        resources:   ["mustachetemplates", "remoteresources"]
      clientConfig:
        service:
          namespace: default
          name: impersonation-webhook
          path: "/"
        caBundle: "LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUZhRENDQTFDZ0F3SUJBZ0lVRHhDeUx2KzJOc3VYRWFYZVVkQWF5WGhva2dnd0RRWUpLb1pJaHZjTkFRRUwKQlFBd0xERXFNQ2dHQTFVRUF3d2hhVzF3WlhKemIyNWhkR2x2YmkxM1pXSm9iMjlyTG1SbFptRjFiSFF1YzNaagpNQjRYRFRJeU1EVXlNekU0TURreU1Wb1hEVE15TURVeU1ERTRNRGt5TVZvd0xERXFNQ2dHQTFVRUF3d2hhVzF3ClpYSnpiMjVoZEdsdmJpMTNaV0pvYjI5ckxtUmxabUYxYkhRdWMzWmpNSUlDSWpBTkJna3Foa2lHOXcwQkFRRUYKQUFPQ0FnOEFNSUlDQ2dLQ0FnRUF6MG9Na1ZNV0FLQ2Q2RXhJMXJmbldTTm9XWGo2T3ZjQ3ZQdHZwZ0t6a3ZPWgowbDVwbThEZlJPNWRxOElTYW5vNVU5WkxvYzlsdnVBdkFBd2Vjc2RWckRkT3RZc0VadUliRGhubklzVEUwcXJOCkJKdFdOSWFUdGhnWTVDM2MraW4vQkdzSjhQL1VNZkFkdjQ3dFlEZ3J3MC9QZmdZYnRlUWRXbDdzclM3SW9ndjMKMTA5SjJXY1lHTjhCZC80bER5a1c5cGFpS1M4a0ViTmYwMG1zYWdLMHhkV0dHQTRiYm92Q2VQc3pxeTdvRWZJMQo1Z0s5clF4VnRoSW9JT3p3WGw1UXJVcm1GaUljUjZLTnZNSVR6V1BhOVM5RnVWMVI5OE9DK0xWQ1h2LzRjbFhTCmttYUd0c2hzdUxFbmFQVVIxQlpETTRpUmtDOWU5ZHc5eE1BeUhFSlJSTWI3TVc1MVhNTVNuU29QODJMTlR2a3EKWU1LQmQraWNBdW1HaXhjdFB0bVZmZmFsSmNvWUtBQ2Y3bVdTYm5mbktMTlZ4dG9DMndtYngvaHhqU1JBdzhDeApXendkUk0ySm9ZdURQb0NNSUNQSjdSeEovZWJvQWU1dlFEVzl2cXZYVUNVQUNWV2U2d04wSVRjNUp3NkpFMkN6CmlDOEd1bDZTMEtHdEdMaHhJbVRHbExrOEpUaUlLM0NIbk8yQ0s0TG96SjVaazREUWJJVlZDOW90NGg1TzVoVHcKVndJaTRxQlpCWkNXM0d1bHVSOFJreE1RYVBmQVhsYUQ5VDVEOUgvdjdxYnZ5UmJJRmRDdFZ0ZGFwd1VKRTZCRQpRLzVWYUJNMEUyVU1uVkVsT2lpaWFQZFFUakNuSGp0bjNEOUpHZElja2ljcHQ2YVFjOTlGakxBYlAzVWpraThDCkF3RUFBYU9CZ1RCL01CMEdBMVVkRGdRV0JCVFBLRWVJcXIrVnp6cEhEVGJSWHZubGpoUGVMVEFmQmdOVkhTTUUKR0RBV2dCVFBLRWVJcXIrVnp6cEhEVGJSWHZubGpoUGVMVEFQQmdOVkhSTUJBZjhFQlRBREFRSC9NQ3dHQTFVZApFUVFsTUNPQ0lXbHRjR1Z5YzI5dVlYUnBiMjR0ZDJWaWFHOXZheTVrWldaaGRXeDBMbk4yWXpBTkJna3Foa2lHCjl3MEJBUXNGQUFPQ0FnRUFmV2lHbXVNYkFydDBRcWt1bG9QaEx3bHBzakZIV0V0anlTRUxjeGIxekFiQ0wrWCsKOXlHT2ErazRJUW10akhQeE9vUWorVk00RUJQaWxRTi9wZzMvQUNvS1Q2RFcxMTVyMElSUDJrM3hWdHRpWE5QWApkQ1BuVHFVdXlqdmtFeTZ4Y1MxZ1BaSGZvMUhtVGQ4eU81YXk3bk5CWWdsdzJ5UkdJQVZSSXA4cjBmK3VXQkpmCktkOUtodHJ3dWNrSzNtQ0Q5a3JqeU91YTlxMVJtVVEvdk4wWlZEMk0xUHRBeDJPSmd6emIrNWxPQ2FMYWlZUVYKaEVSSUZjV1dOcXdpVjZMVTZUOVFhNUo1ZkJCbldDZ2Z3cGFFWnk3WmZTUFpBRHJBQzZzU2dXOTdDZ25ObDVOQgpIelJzNk5TekZxZ245b2RvNzNVdGpLK2xSaDI0MTFuTkxOSkp2OEI1Rmk3VUZ5OGZnWm4xN0ZzaTNNNGdrM2tYCkNMcHZFQzJRdFpESENvUTB2SjRqNklFVWYwMmxGREpFYU9kdHVUM1BjWDRoR2d3ZDIyQ2ZjRW9EM0VaQ0E1UEwKVS9iV3I2UC9Ic1FhZEozM09yMjBHMlNNNTZUNUgwTG5GeTZSb2dSbGJGa0VUNGZOQ3Bld3pMVnlQcjNJQ2lHVwpTbzVyb0JDZkJycmFyMXo4aVBydVFRV1FSd00wMExBVnBPTktuM0dSaXcxOVN6N0ozcFB3dXBKdkNzQjBkNE5YCmNHRUNUYVFpQmh6TENqOTBXV3czWnBCSS9SdGYwRFJjcFFlOGx2ZlZ2MDhDK0M4VUZqM0RyU0pqdXhkdW5vR3YKdjUxWXl4dzh2T0RENWJvY2l2SHZCNHFiTnFvUno4dVR5RmFWOHEyZmVFemJIOFhwVlJLUDRhc20zSjQ9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0="
      admissionReviewVersions: ["v1"]
      sideEffects: None
      timeoutSeconds: 10
